#
#  Basic PVs for a Wiener/ISEG/MPOD power supply channel
#
#  Macros required:
#     DEV   : base device name
#     HOST  : SNMP host
#     CHAN  : ISEG slot/channel ID, for example u300 = slot 4 channel 0
#     GROUP : Group number channel belongs to
#                0   : whole crate
#                64  : all HV modules
#                128 : all LV modules
#             (older Wiener/ISEGs may instead have group numbers for each slot)

#record(longout, "$(DEV):OnCommand")
#{
#  field(DESC, "SNMP channel")
#  field(DTYP, "Snmp")
#  field(SCAN, "Passive")
#  field(OUT, "@$(HOST) guru %(W)outputSwitch.$(CHAN) ( 100 i")
#}

# Commands

record(longout, "$(DEV):cmdStart")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdSystemStart.$(CHAN) INTEGER: 100 i")
}
record(longout, "$(DEV):cmdStop")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdSystemStop.$(CHAN) INTEGER: 100 i")
}
record(longout, "$(DEV):cmdReset")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdResetSystem.$(CHAN) INTEGER: 100 i")
}

record(longout, "$(DEV):cmdStandby")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdSystemStandByPowerOn.$(CHAN) INTEGER: 100 i")
}

record(longout, "$(DEV):cmdStartHpa1")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdHpa1Start.$(CHAN) INTEGER: 100 i")
}
record(longout, "$(DEV):cmdStopHpa1")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdHpa1Stop.$(CHAN) INTEGER: 100 i")
}
record(longout, "$(DEV):cmdResetHpa1")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdResetHpa1.$(CHAN) INTEGER: 100 i")
}

record(longout, "$(DEV):cmdStandbyHpa1")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdHpa1StandByPowerOn.$(CHAN) INTEGER: 100 i")
}

record(longout, "$(DEV):cmdStartHpa2")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdHpa2Start.$(CHAN) INTEGER: 100 i")
}
record(longout, "$(DEV):cmdStopHpa2")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdHpa2Stop.$(CHAN) INTEGER: 100 i")
}
record(longout, "$(DEV):cmdResetHpa2")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdResetHpa2.$(CHAN) INTEGER: 100 i")
}

record(longout, "$(DEV):cmdStandbyHpa2")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdHpa1StandByPowerOn.$(CHAN) INTEGER: 100 i")
}


record(longout, "$(DEV):cmdSaveHistoryLog")
{
  field(DESC, "SNMP channel")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdDownloadLogPage.$(CHAN) INTEGER: 100 i")
}

#record(longout, "$(DEV):cmdTxChangeOverAuto")
#{
#  field(DESC, "SNMP channel")
#  field(SCAN, "Passive")
#  field(DTYP, "Snmp")
#  field(OUT, "@$(HOST) public %(E)cmdTxChangeOverAuto.$(CHAN) INTEGER: 100 i")
#}
#record(longout, "$(DEV):cmdTxChangeOverManual")
#{
#  field(DESC, "SNMP channel")
#  field(SCAN, "Passive")
#  field(DTYP, "Snmp")
#  field(OUT, "@$(HOST) public %(E)cmdTxChangeOverManual.$(CHAN) INTEGER: 100 i"#)
#}


#record(longout, "$(DEV):cmdSetOperationModeLocal")
#{
#  field(DESC, "SNMP channel")
#  field(SCAN, "Passive")
#  field(DTYP, "Snmp")
#  field(OUT, "@$(HOST) public %(E)cmdSetOperationModeLocal.$(CHAN) INTEGER: 100 i")
#}

#record(longout, "$(DEV):txPowerSet-w")
#{
#  field(DESC, "SNMP channel")
#  field(SCAN, "Passive")
#  field(DTYP, "Snmp")
#  field(OUT, "@$(HOST) public %(E)cmdTxPowerSet.$(CHAN) INTEGER: 100 i")
#}

record(stringin, "$(DEV):sysContact")
{
  field(DESC, "SNMP channel")
  field(SCAN, ".5 second")
  field(DTYP, "Snmp")
  field(INP, "@$(HOST) public %(W)sysContact.$(CHAN) STRING: 100 s")
}


record(stringin, "$(DEV):sysDescr")
{
  field(DESC, "SNMP channel")
  field(SCAN, ".5 second")
  field(DTYP, "Snmp")
#  field(FTVL, "CHAR")
#  field(NELM, "200")
  field(INP, "@$(HOST) public %(W)sysDescr.$(CHAN) STRING: 100 s")
}

# History buffer related records

record(longout, "$(DEV):cGetHistoryPage")
{
  field(DESC, "SNMP channel- select page")
  field(SCAN, "Passive")
  field(DTYP, "Snmp")
  field(OUT, "@$(HOST) public %(E)cmdDownloadLogPage.$(CHAN) INTEGER: 100 i")
}

record(longin, "$(DEV):sysHistBufLen")
{
  field(DESC, "SNMP channel- # of history records")
  field(SCAN, ".5 second")
  field(DTYP, "Snmp")
  field(INP, "@$(HOST) public %(E)sysHistoryLogRecordCount.$(CHAN) INTEGER: 100 i")
}

#record(waveform, "$(DEV):sysHistoryBuf-wfm")
#{
#  field(DESC, "SNMP channel")
#  field(SCAN, "5 second")
#  field(DTYP, "Snmp")
#  field(INP, "@$(HOST) public %(E)sysHistoryLogBuffer.$(CHAN) HEX-STRING: 2000 s h")
#  field(NELM, "500")
#  field(FTVL, "STRING")
#}
